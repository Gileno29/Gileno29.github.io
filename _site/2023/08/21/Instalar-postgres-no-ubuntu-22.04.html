<h2 id="-head">«««&lt; HEAD</h2>
<p>layout: post
title:  “Instalando o PostgreSQL no Ubuntu 22.04 lts”
date:   2023-08-21 08:37
categories: IT
—</p>
<p style="text-align:justify;"> O postgres é um dos bancos de dados relacionais mais utilizados recentemente, devido a sua conformidade com ACID(Atomicidade, consistencia isolamento e duarabilidade) em todas as suas configurações além de implementar diferentes algoritimos para controle de índice como aravores e indices de expressão que até então não são implementados em outros bancos relacionais como o MySQL, existem inúmeros artigos na internet falando sobre diferenças entre esses bancos e realizando comparativos entre eles, o ponto aqui não é esse, mas aos interesados vou deixar o link de um artigo da AWS sobre o tema nesse <a href="https://aws.amazon.com/pt/compare/the-difference-between-mysql-vs-postgresql/">link</a>. Nesse post vou repassar uma situação simples porém para iniciantes pode ser um pouco complicado de realizar, vou apresentar como é possível instalar o postgres no linux, mais precisamente no ubuntu 22.04 lts e algumas configurações básicas que podem ser realizadas.</p>
<p>=======
O postgres é um dos bancos de dados relacionais mais utilizados recentemente, devido a sua conformidade com ACID(Atomicidade, consistencia isolamento e duarabilidade) em todas as suas configurações além de implementar diferentes algoritimos para controle de índice como aravores e indices de expressão que até então não são implementados em outros bancos relacionais como o MySQL, existem inúmeros artigos na internet falando sobre diferenças entre esses bancos e realizando comparativos entre eles, o ponto aqui não é esse, mas aos interesados vou deixar o link de um artigo da AWS sobre o tema nesse <a href="https://aws.amazon.com/pt/compare/the-difference-between-mysql-vs-postgresql/">link</a>. Nesse post vou repassar uma situação simples porém para iniciantes pode ser um pouco complicado de realizar, vou apresentar como é possível instalar o postgres no linux, mais precisamente no ubuntu 22.04 lts e algumas configurações básicas que podem ser realizadas.</p>
<blockquote>
  <blockquote>
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <p>ff54a4441fee3617a9f521f1fb5709b7cb6d0d2d
Bem vamos lá!.</p>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</blockquote>

<h2 id="instalação">Instalação</h2>
<ul>
  <li>Atualize seus repositorios.
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  apt-get update
</code></pre></div>    </div>
  </li>
  <li>Instale o postgres com o seguinte linha de comando:
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nb">sudo </span>apt <span class="nb">install </span>postgresql postgresql-contrib
</code></pre></div>    </div>
  </li>
</ul>

<p style="text-align:justify;">A opção -contrib permite que seja utilizado alguns modulos adicionais caso seja preciso para algo, não é obrigatorio instalar, então pode ser deixado de lado no momento da instlação se você não precisa de algum desses modulos específicos. <a href="https://www.mankier.com/package/postgresql-contrib">Aqui</a> tem uma lista desses modulos do pacote.</p>

<p style="text-align:justify;">após a instalação finalizar o postgres por padrão vai ccriar um usuario em sua máquina chamdo postgres e você pode utilizar esse usuario para logar no banco de dados. Como isso funciona? Bem o postgres trabalha com esquema de "ROLES" para gerenciamento de usuarios e permicionamento, no final é bem similar ao users e groups de sistemas Linux/Unix, após está instalado o postgres vai utilizar ident authentication traduzindo: Ele vai associar usuarios de seu sistema como alguma ROLE que Esteja configurada nele, nesse caso a ROLE postgres que vai ser associada ao usuario postgres.</p>

<h2 id="acesso-e-configuração">Acesso e configuração</h2>
<p>Vamos agora logar no baco de dados.
Para logar no banco de dados existe algumas formas, vou passar a que acredito ser mais simpres e intuitiva:</p>

<ul>
  <li>
    <p style="text-align:justify;">Acesse o usuario postgres a partir do seu usuario root</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>su postgres
</code></pre></div>    </div>
  </li>
  <li>
    <p style="text-align:justify;">Acesse o banco de dados com comando psql </p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$ </span>psql
</code></pre></div>    </div>
  </li>
  <li>
    <p style="text-align:justify;">Você vai cair na tela de acesso do postgreSQL. </p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> psql <span class="o">(</span>14.9 <span class="o">(</span>Ubuntu 14.9-0ubuntu0.22.04.1<span class="o">))</span>
 Type <span class="s2">"help"</span> <span class="k">for </span>help.

 <span class="nv">postgres</span><span class="o">=</span><span class="c">#</span>
</code></pre></div>    </div>
  </li>
</ul>

<p>«««&lt; HEAD</p>
<p style="text-align:justify;">Pronto a partir desse momento já pode ser criado databases novas roles para Gerenciamento das informações e o que mais seja necessário. Porém vamos dizer que você deseja por um pouco mais de segurança no acesso a seu database, que você deseja que mesmo quem esteja logado como root em seu servidor não consiga acessar diretamente seu banco de dados com um simples "psql" para isso vamos precisar configurar uma senha para nosso usuario postgres.</p>

<ul>
  <li>
    <p style="text-align:justify;">Para configurar uma senha para o usuario postgres podemos fazer da seguinte forma:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>  <span class="nv">postgres</span><span class="o">=</span><span class="c"># \password</span>
  Enter new password <span class="k">for </span>user <span class="s2">"postgres"</span>:
</code></pre></div>    </div>
  </li>
</ul>

<p style="text-align:justify;"> O banco vai pedir para confirmar a senha após isso, se elas não forem iguasi a operação não vai funcionar. Após isso vai ser preciso acessar o arquivo de configuração do postgres que fica no seguinte path:/etc/postgresql/sua_versao_do_postgres/main/pg_hba.conf.
O arquivo vai possuir uma linha com a seguinte designação:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># DO NOT DISABLE!</span>
<span class="c"># If you change this first entry you will need to make sure that the</span>
<span class="c"># database superuser can access the database using some other method.</span>
<span class="c"># Noninteractive access to all databases is required during automatic</span>
<span class="c"># maintenance (custom daily cronjobs, replication, and similar tasks).</span>
<span class="c">#</span>
<span class="c"># Database administrative login by Unix domain socket</span>
<span class="nb">local   </span>all         	postgres                            	peer

<span class="c"># TYPE  DATABASE    	USER        	ADDRESS             	METHOD</span>

<span class="c"># "local" is for Unix domain socket connections only</span>
</code></pre></div></div>
<ul>
  <li>
    <p style="text-align:justify;">Altere o peer para md5 e restart o servico do banco de dados:</p>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nb">sudo </span>service postgresql restart
</code></pre></div>    </div>
    <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code> <span class="nv">$root</span>: /home/gileno ❯ psql <span class="nt">-U</span> postgres
 Password <span class="k">for </span>user postgres:
</code></pre></div>    </div>
  </li>
</ul>
<p style="text-align:justify;">Pronto, com isso você configurou uma senha em seu usuário postgres. </p>

<p>=======
Pronto a partir desse momento já pode ser criado databases e novos “ROLES” para gerenciamento do banco de dados. Porém vamos dizer que você deseja pôr um pouco mais de segurança no acesso a seu database, que você deseja que mesmo quem esteja logado como root em seu servidor não consiga acessar diretamente seu banco de dados com um simples “psql” para isso vamos precisar configurar uma senha para nosso usuário postgres.</p>
<blockquote>
  <blockquote>
    <blockquote>
      <blockquote>
        <blockquote>
          <blockquote>
            <blockquote>
              <p>ff54a4441fee3617a9f521f1fb5709b7cb6d0d2d</p>
            </blockquote>
          </blockquote>
        </blockquote>
      </blockquote>
    </blockquote>
  </blockquote>
</blockquote>
